---
author: Jerry Hsia
title: >
  Cocos2d-x学习笔记：01-开发环境搭建
excerpt:
layout: post
views:
  - 100
category:
  - Cocos2d-x
tags:
  - Cocos2d-x
post_format: [ ]
---
最近开始学习Cocos2d-x，首先就是搭建环境的问题了，官方最然已经发布了3.0版本，但我学习还是从2.X开始，主要是2.X学习资料比较丰富吧，搭建环境对最初学者来说大多是头疼事，自己也走了一些弯路，主要是版本的区别，搭建环境方式不同。

 

我学习使用的版本是2.2.3，这里就针对这一版本来写一下详细的搭建过程(主要针对Windows和Android)。

一、Windows平台

1、从下载http://www.cocos2d-x.org/源码。

2、下载安装Visual Studio。

3、直接可打开Cocos2d-x目录下cocos2d-winrt.vc201*.sln，编译、运行。

4、安装Python将Python根目录及Lib子目录加入环境变量。

5、在Cocos2d-x目录下\tools\project-creator这里启动命令行输入一下命令生成各平台项目：

    python create_project.py -project MyGame -package me.xiajie.mygame -language cpp

MyGame是项目名，me.xiajie.mygame是包名。

至此Windows环境算是搭建完成。

 

二、Android平台

Android平台就需要折腾了，博主也一样。

1、下载安装JDK、Eclipse、Android SDK这不难吧。

2、下载安装Android NDK(http://developer.android.com/sdk/ndk/index.html)。

3、下载安装cygwin

由于NDK编译代码时必须要用到make和gcc，所以你必须先搭建一个linux环境， cygwin是一个在windows平台上运行的unix模拟环境,它对于学习unix/linux操作环境，或者从unix到windows的应用程序移植，非常有用。通过它，你就可以在不安装linux的情况下使用NDK来编译C、C++代码了。安装后测试一下cygwin是不是已经安装好了。

运行cygwin，在弹出的命令行窗口输入：cygcheck -c cygwin命令，会打印出当前cygwin的版本和运行状态，如果status是ok的话，则cygwin运行正常。

然后依次输入gcc –v，g++ -v，make –v，gdb –v进行测试，如果都打印出版本信息和一些描述信息，非常高兴的告诉你，你的cygwin安装完成了！

4、配置NDK环境变量

(1)首先找到cygwin的安装目录，找到一个home\<你的用户名>\.bash\_profile文件，我的是：E:\cygwin\home\Administrator\.bash\_profile，(注意：我安装的时候我的home文件夹下面神马都没有，解决 的办法：首先打开环境变量，把里面的用户变量中的HOME变量删掉，在E:\cygwin\home文件夹下建立名为Administrator的文件夹（是用户名），然后把E:\cygwin\etc\skel\.bash_profile拷贝到该文件夹下)。

(2)打开bash_profile文件，添加NDK=/cygdrive/<你的盘符>/<android ndk 目录> 例如：NDK=/cygdrive/e/android-ndk-r5

export NDK

NDK这个名字是随便取的，为了方面以后使用方便，选个简短的名字，然后保存

(3)打开cygwin，输入cd $NDK，如果输出上面配置的/cygdrive/e/android-ndk-r5信息，则表明环境变量设置成功了。

5、用NDK来编译程序  
1、 现在我们用安装好的NDK来编译一个简单的程序吧，我们选择ndk自带的例子hello-jni，我的位于E:\android-ndk-r7\samples\hello-jni(根据你具体的安装位置而定)，

2、 运行cygwin，输入命令cd /cygdrive/e/android-ndk-r7/samples/hello-jni，进入到E:\android-ndk-r7\samples\hello-jni目录。

3、 输入$NDK/ndk-build，执行成功后，它会自动生成一个libs目录，把编译生成的.so文件放在里面。($NDK是调用我们之前配置好的环境变量，ndk-build是调用ndk的编译程序)

4、 此时去hello-jni的libs目录下看有没有生成的.so文件，如果有，你的ndk就运行正常啦！

5、用cygwin编译我们产生的工程

用cygwin cd进入到Cocos2d-x的projects找到刚才创建的项目MyGame，进入proj.android执行./build_native.sh，编译完成后打开Eclipse将项目导入用模拟器运行。

 

**由于过程比较复杂，本文仅讲述了比较重要的一些步骤，一些安装细节未做描述，如有不明白请留言或查阅other资料，谢谢！**