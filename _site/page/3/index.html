<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="This is Jerry's Blog">
  <meta name="author" content="Jerry Hsia">
  
  <meta name="keywords" content="Jerry's Blog, Jerry's Blog, This is Jerry's Blog, Jerry Hsia">
  
  
  <title>Jerry's Blog</title>
  
  
  <link rel="canonical" href="http://xiajie.me">
  
  <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/assets/css/public.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/light.js"></script>
</head>
<body>
  <div id="blog">
    <div class="sidebar">
  <div class="profilepic">
    <a href="/"><img src="/assets/img/avatar.jpg" alt="logo"></img></a>
  </div>
  <h1 class="title"><a href="/">Jerry's Blog</a></h1>
  <h2 class="sub-title">To strive to become a habit</h2>
  <nav id="nav">
    <ul>
    
      <li><a href="/pages/timing.html"><i class="fa fa-clock-o"></i>&nbsp;时间轴</a></li>
    
      <li><a href="/pages/category.html"><i class="fa fa-tags"></i>&nbsp;分类</a></li>
    
      <li><a href="/pages/read.html"><i class="fa fa-book"></i>&nbsp;阅读</a></li>
    
      <li><a href="/pages/about.html"><i class="fa fa-paper-plane-o"></i>&nbsp;关于</a></li>
    
    </ul>
  </nav>  
  <nav id="sub-nav">
    <a class="weibo " href="http://weibo.com/u/5142885740" title="新浪微博" target="_blank"><i class="fa fa-weibo"></i></a>
    <a class="github" href="https://github.com/Jerry9916" title="GitHub" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    <a class="rss" href="/page/feed.xml" title="RSS订阅" target="_blank"><i class="fa fa-rss"></i></a>
  </nav>
</div>

    <div class="main">
    
<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/posts/31.html">Cocos2d-x学习笔记：01-开发环境搭建
</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年03月31日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#cocos2d-x">cocos2d-x</a>
      </p>
    </header>
    <div class="post-main">
      <p>最近开始学习Cocos2d-x，首先就是搭建环境的问题了，官方最然已经发布了3.0版本，但我学习还是从2.X开始，主要是2.X学习资料比较丰富吧，搭建环境对最初学者来说大多是头疼事，自己也走了一些弯路，主要是版本的区别，搭建环境方式不同。</p>

<p> </p>

<p>我学习使用的版本是2.2.3，这里就针对这一版本来写一下详细的搭建过程(主要针对Windows和Android)。</p>

<p>一、Windows平台</p>

<p>1、从下载http://www.cocos2d-x.org/源码。</p>

<p>2、下载安装Visual Studio。</p>

<p>3、直接可打开Cocos2d-x目录下cocos2d-winrt.vc201*.sln，编译、运行。</p>

<p>4、安装Python将Python根目录及Lib子目录加入环境变量。</p>

<p>5、在Cocos2d-x目录下\tools\project-creator这里启动命令行输入一下命令生成各平台项目：</p>

<pre><code>python create_project.py -project MyGame -package me.xiajie.mygame -language cpp
</code></pre>

<p>MyGame是项目名，me.xiajie.mygame是包名。</p>

<p>至此Windows环境算是搭建完成。</p>

<p> </p>

<p>二、Android平台</p>

<p>Android平台就需要折腾了，博主也一样。</p>

<p>1、下载安装JDK、Eclipse、Android SDK这不难吧。</p>

<p>2、下载安装Android NDK(http://developer.android.com/sdk/ndk/index.html)。</p>

<p>3、下载安装cygwin</p>

<p>由于NDK编译代码时必须要用到make和gcc，所以你必须先搭建一个linux环境， cygwin是一个在windows平台上运行的unix模拟环境,它对于学习unix/linux操作环境，或者从unix到windows的应用程序移植，非常有用。通过它，你就可以在不安装linux的情况下使用NDK来编译C、C++代码了。安装后测试一下cygwin是不是已经安装好了。</p>

<p>运行cygwin，在弹出的命令行窗口输入：cygcheck -c cygwin命令，会打印出当前cygwin的版本和运行状态，如果status是ok的话，则cygwin运行正常。</p>

<p>然后依次输入gcc –v，g++ -v，make –v，gdb –v进行测试，如果都打印出版本信息和一些描述信息，非常高兴的告诉你，你的cygwin安装完成了！</p>

<p>4、配置NDK环境变量</p>

<p>(1)首先找到cygwin的安装目录，找到一个home&lt;你的用户名&gt;.bash_profile文件，我的是：E:\cygwin\home\Administrator.bash_profile，(注意：我安装的时候我的home文件夹下面神马都没有，解决 的办法：首先打开环境变量，把里面的用户变量中的HOME变量删掉，在E:\cygwin\home文件夹下建立名为Administrator的文件夹（是用户名），然后把E:\cygwin\etc\skel.bash_profile拷贝到该文件夹下)。</p>

<p>(2)打开bash_profile文件，添加NDK=/cygdrive/<你的盘符>/<android ndk="" 目录=""> 例如：NDK=/cygdrive/e/android-ndk-r5</android></你的盘符></p>

<p>export NDK</p>

<p>NDK这个名字是随便取的，为了方面以后使用方便，选个简短的名字，然后保存</p>

<p>(3)打开cygwin，输入cd $NDK，如果输出上面配置的/cygdrive/e/android-ndk-r5信息，则表明环境变量设置成功了。</p>

<p>5、用NDK来编译程序<br />
1、 现在我们用安装好的NDK来编译一个简单的程序吧，我们选择ndk自带的例子hello-jni，我的位于E:\android-ndk-r7\samples\hello-jni(根据你具体的安装位置而定)，</p>

<p>2、 运行cygwin，输入命令cd /cygdrive/e/android-ndk-r7/samples/hello-jni，进入到E:\android-ndk-r7\samples\hello-jni目录。</p>

<p>3、 输入$NDK/ndk-build，执行成功后，它会自动生成一个libs目录，把编译生成的.so文件放在里面。($NDK是调用我们之前配置好的环境变量，ndk-build是调用ndk的编译程序)</p>

<p>4、 此时去hello-jni的libs目录下看有没有生成的.so文件，如果有，你的ndk就运行正常啦！</p>

<p>5、用cygwin编译我们产生的工程</p>

<p>用cygwin cd进入到Cocos2d-x的projects找到刚才创建的项目MyGame，进入proj.android执行./build_native.sh，编译完成后打开Eclipse将项目导入用模拟器运行。</p>

<p> </p>

<p><strong>由于过程比较复杂，本文仅讲述了比较重要的一些步骤，一些安装细节未做描述，如有不明白请留言或查阅other资料，谢谢！</strong></p>

      <div class="readall"><a href="/posts/31.html" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/posts/30.html">ThinkPHP连续插入数据时的BUG</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年03月06日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#php">php</a>
      </p>
    </header>
    <div class="post-main">
      <p>今天在使用Thinkphp的时候发现一个BUG，我需要往表里连续插入数据，结果发现中间某一条数据(A数据)如果验证不通过，后面正确的数据也不能插入，并且出错的信息与A数据都相同，查看源码后发现Model.class.php中autoValidation函数末有这样一代码片段</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// 批量验证的时候最后返回错误</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">))</span> <span class="k">return</span> <span class="k">false</span><span class="p">;</span></code></pre></div>

<p>由于模型对象已经被处理为了单例，这里的出错信息将是A数据的出错信息，下一条数据(正确的一条数据)验证时这里并未释放A数据的出错信息，这里将直接判定为false造成逻辑错误，我理解的是这样。修改方法是在autoValidation开始时加上$this-&gt;error = null先进行释放，这样完美解决了。</p>

      <div class="readall"><a href="/posts/30.html" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/posts/29.html">MySQL索引类型和优缺点</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年03月04日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#mysql">mysql</a>
      </p>
    </header>
    <div class="post-main">
      <p>索引是一种特殊的文件(InnoDB数据表上的索引是表空间的一个组成部分)，它们包含着对数据表里所有记录的引用指针。<br />
注：[1]索引不是万能的！索引可以加快数据检索操作，但会使数据修改操作变慢。每修改数据记录，索引就必须刷新一次。为了在某种程序上弥补这一缺陷，许 多SQL命令都有一个DELAY_KEY_WRITE项。这个选项的作用是暂时制止MySQL在该命令每插入一条新记录和每修改一条现有之后立刻对索引进 行刷新，对索引的刷新将等到全部记录插入/修改完毕之后再进行。在需要把许多新记录插入某个数据表的场合，DELAY_KEY_WRITE选项的作用将非 常明显。[2]另外，索引还会在硬盘上占用相当大的空间。因此应该只为最经常查询和最经常排序的数据列建立索引。注意，如果某个数据列包含许多重复的内 容，为它建立索引就没有太大的实际效果。从理论上讲，完全可以为数据表里的每个字段分别建一个索引，但MySQL把同一个数据表里的索引总数限制为16个。<br />
1、InnoDB数据表的索引<br />
与MyISAM数据表相比，索引对InnoDB数据的重要性要大得多。在InnoDB数据表上，索引对InnoDB数据表的重要性要在得多。在 InnoDB数据表上，索引不仅会在搜索数据记录时发挥作用，还是数据行级锁定机制的苊、基础。”数据行级锁定”的意思是指在事务操作的执行过程中锁定正 在被处理的个别记录，不让other用户进行访问。这种锁定将影响到(但不限于)SELECT…LOCK IN SHARE MODE、SELECT…FOR UPDATE命令以及INSERT、UPDATE和DELETE命令。<br />
出于效率方面的考虑，InnoDB数据表的数据行级锁定实际发生在它们的索引上，而不是数据表自身上。显然，数据行级锁定机制只有在有关的数据表有一个合 适的索引可供锁定的时候才能发挥效力。</p>

<p>2、限制<br />
如果WEHERE子句的查询条件里有不等号(WHERE coloum != …)，MySQL将无法使用索引。类似地，如果WHERE子句的查询条件里使用了函数(WHERE DAY(column) = …)，MySQL也将无法使用索引。在JOIN操作中(需要从多个数据表提取数据时)，MySQL只有在主键和外键的数据类型相同时才能使用索引。如果WHERE子句的查询条件里使用比较操作符LIKE和REGEXP，MySQL只有在搜索模板的第一个字符不是通配符的情况下才能使用索引。比如说， 如果查询条件是LIKE ‘abc%’，MySQL将使用索引；如果查询条件是LIKE ‘%abc’，MySQL将不使用索引。在ORDER BY操作中，MySQL只有在排序条件不是一个查询条件表达式的情况下才使用索引。(虽然如此，在涉及多个数据表查询里，即使有索引可用，那些索引在加快 ORDER BY方面也没什么作用)如果某个数据列里包含许多重复的值，就算为它建立了索引也不会有很好的效果。比如说，如果某个数据列里包含的净是些诸如”0/1″或”Y/N”等值，就没 有必要为它创建一个索引。</p>

<p>普通索引、唯一索引和主索引</p>

<p>1、普通索引<br />
普通索引(由关键字KEY或INDEX定义的索引)的唯一任务是加快对数据的访问速度。因此，应该只为那些最经常出现在查询条件(WHERE column = …)或排序条件(ORDER BY column)中的数据列创建索引。只要有可能，就应该选择一个数据最整齐、最紧凑的数据列(如一个整数类型的数据列)来创建索引。</p>

<p>2、唯一索引<br />
普通索引允许被索引的数据列包含重复的值。比如说，因为人有可能同名，所以同一个姓名在同一个”员工个人资料”数据表里可能出现两次或更多次。如果能确定某个数据列将只包含彼此各不相同的值，在为这个数据列创建索引的时候就应该用关键字UNIQUE把它定义为一个唯一索引。这么做的好处：一是简 化了MySQL对这个索引的管理工作，这个索引也因此而变得更有效率；二是MySQL会在有新记录插入数据表时，自动检查新记录的这个字段的值是否已经在 某个记录的这个字段里出现过了；如果是，MySQL将拒绝插入那条新记录。也就是说，唯一索引可以保证数据记录的唯一性。事实上，在许多场合，人们创建唯 一索引的目的往往不是为了提高访问速度，而只是为了避免数据出现重复。</p>

<p>3、主索引<br />
在前面已经反复多次强调过：必须为主键字段创建一个索引，这个索引就是所谓的”主索引”。主索引与唯一索引的唯一区别是：前者在定义时使用的关键字是 PRIMARY而不是UNIQUE。</p>

<p>4、外键索引<br />
如果为某个外键字段定义了一个外键约束条件，MySQL就会定义一个内部索引来帮助自己以最有效率的方式去管理和使用外键约束条件。</p>

<p>5、复合索引<br />
索引可以覆盖多个数据列，如像INDEX(columnA, columnB)索引。这种索引的特点是MySQL可以有选择地使用一个这样的索引。如果查询操作只需要用到columnA数据列上的一个索引，就可以使 用复合索引INDEX(columnA, columnB)。不过，这种用法仅适用于在复合索引中排列在前的数据列组合。比如说，INDEX(A, B, C)可以当做A或(A, B)的索引来使用，但不能当做B、C或(B, C)的索引来使用。</p>

<p>6、索引的长度<br />
在为CHAR和VARCHAR类型的数据列定义索引时，可以把索引的长度限制为一个给定的字符个数(这个数字必须小于这个字段所允许的最大字符个数)。这 么做的好处是可以生成一个尺寸比较小、检索速度却比较快的索引文件。在绝大多数应用里，数据库中的字符串数据大都以各种各样的名字为主，把索引的长度设置 为10~15个字符已经足以把搜索范围缩小到很少的几条数据记录了。在为BLOB和TEXT类型的数据列创建索引时，必须对索引的长度做出限制；MySQL所允许的最大索引长度是255个字符。</p>

<p>7、全文索引<br />
文本字段上的普通索引只能加快对出现在字段内容最前面的字符串(也就是字段内容开头的字符)进行检索操作。如果字段里存放的是由几个、甚至是多个单词构成 的较大段文字，普通索引就没什么作用了。这种检索往往以LIKE %word%的形式出现，这对MySQL来说很复杂，如果需要处理的数据量很大，响应时间就会很长。这类场合正是全文索引(full-text index)可以大显身手的地方。在生成这种类型的索引时，MySQL将把在文本中出现的所有单词创建为一份清单，查询操作将根据这份清单去检索有关的数 据记录。全文索引即可以随数据表一同创建，也可以等日后有必要时再使用下面这条命令添加：<br />
ALTER TABLE tablename ADD FULLTEXT(column1, column2)<br />
有了全文索引，就可以用SELECT查询命令去检索那些包含着一个或多个给定单词的数据记录了。下面是这类查询命令的基本语法：<br />
SELECT * FROM tablename WHERE MATCH(column1, column2) AGAINST(‘word1′, ‘word2′, ‘word3′)<br />
上面这条命令将把column1和column2字段里有word1、word2和word3的数据记录全部查询出来。<br />
注解：InnoDB数据表不支持全文索引。</p>

<p>8、查询和索引的优化</p>

<p>只有当数据库里已经有了足够多的测试数据时，它的性能测试结果才有实际参考价值。如果在测试数据库里只有几百条数据记录，它们往往在执行完第一条查询命令 之后就被全部加载到内存里，这将使后续的查询命令都执行得非常快–不管有没有使用索引。只有当数据库里的记录超过了1000条、数据总量也超过了 MySQL服务器上的内存总量时，数据库的性能测试结果才有意义。</p>

<p>在不确定应该在哪些数据列上创建索引的时候，人们从EXPLAIN SELECT命令那里往往可以获得一些帮助。这其实只是简单地给一条普通的SELECT命令加一个EXPLAIN关键字作为前缀而已。有了这个关键 字，MySQL将不是去执行那条SELECT命令，而是去对它进行分析。MySQL将以表格的形式把查询的执行过程和用到的索引(如果有的话)等信息列出 来。<br />
在EXPLAIN命令的输出结果里，第1列是从数据库读取的数据表的名字，它们按被读取的先后顺序排列。type列指定了本数据表与其它数据表之间的关联 关系(JOIN)。在各种类型的关联关系当中，效率最高的是system，然后依次是const、eq_ref、ref、range、index和 All(All的意思是：对应于上一级数据表里的每一条记录，这个数据表里的所有记录都必须被读取一遍–这种情况往往可以用一索引来避免)。<br />
possible_keys数据列给出了MySQL在搜索数据记录时可选用的各个索引。key数据列是MySQL实际选用的索引，这个索引按字节计算的长 度在key_len数据列里给出。比如说，对于一个INTEGER数据列的索引，这个字节长度将是4。如果用到了复合索引，在key_len数据列里还可 以看到MySQL具体使用了它的哪些部分。作为一般规律，key_len数据列里的值越小越好(意思是更快)。<br />
ref数据列给出了关联关系中另一个数据表里的数据列的名字。row数据列是MySQL在执行这个查询时预计会从这个数据表里读出的数据行的个数。row 数据列里的所有数字的乘积可以让我们大致了解这个查询需要处理多少组合。<br />
最后，extra数据列提供了与JOIN操作有关的更多信息，比如说，如果MySQL在执行这个查询时必须创建一个临时数据表，就会在extra列看到 using temporary字样。</p>

      <div class="readall"><a href="/posts/29.html" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/posts/28.html">linux下lnmp折腾小记</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年01月20日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#other">other</a>
      </p>
    </header>
    <div class="post-main">
      <p>最近安装lnmp是各种蛋疼，几番折腾后终于搞定了：</p>

<p>1、安装php5.4以上支持</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get install python-software-properties
add-apt-repository ppa:ondrej/php5
apt-get update
apt-get install php5</code></pre></div>

<p>2、安装mysql</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install mysql-server mysql-client</code></pre></div>

<p>3、安装nginx</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install nginx</code></pre></div>

<p>4、安装成功后。我们重启下nginx服务</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo service nginx restart</code></pre></div>

<p>启动之后我们就可以访问以下我们的地址了。看能不能出现nginx的欢迎界面。</p>

<p>5、这里我们使用php5-fpm来作为我们的php解析</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install php5-fpm</code></pre></div>

<p>6、接下来我们要修改一下nginx的站点配置了</p>

<p>ngnix的配置文件存放在/etc/nginx/sites-availble</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># You may add here your</span>
    <span class="c"># server {</span>
    <span class="c">#   ...</span>
    <span class="c"># }</span>
    <span class="c"># statements for each of your virtual hosts to this file</span>

    <span class="c">##</span>
    <span class="c"># You should look at the following URL&#39;s in order to grasp a solid understanding</span>
    <span class="c"># of Nginx configuration files in order to fully unleash the power of Nginx.</span>
    <span class="c"># http://wiki.nginx.org/Pitfalls</span>
    <span class="c"># http://wiki.nginx.org/QuickStart</span>
    <span class="c"># http://wiki.nginx.org/Configuration</span>
    <span class="c">#</span>
    <span class="c"># Generally, you will want to move this file somewhere, and start with a clean</span>
    <span class="c"># file but keep this around for reference. Or just disable in sites-enabled.</span>
    <span class="c">#</span>
    <span class="c"># Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.</span>
    <span class="c">##</span>

    server <span class="o">{</span>
        listen   80<span class="p">;</span> <span class="c">## listen for ipv4; this line is default and implied</span>
    <span class="c">#   listen   [::]:80 default ipv6only=on; ## listen for ipv6</span>

        root /wwwroot/mysql<span class="p">;</span>
        index index.html index.htm index.php<span class="p">;</span>

        <span class="c"># Make site accessible from http://localhost/</span>
        server_name mysql.xiajie.org<span class="p">;</span>

        location / <span class="o">{</span>
            <span class="c"># First attempt to serve request as file, then</span>
            <span class="c"># as directory, then fall back to index.html</span>
            try_files <span class="nv">$uri</span> <span class="nv">$uri</span>/ /index.html<span class="p">;</span>
            <span class="c"># Uncomment to enable naxsi on this location</span>
            <span class="c"># include /etc/nginx/naxsi.rules</span>
        <span class="o">}</span>

        location /doc/ <span class="o">{</span>
            <span class="nb">alias</span> /usr/share/doc/<span class="p">;</span>
            autoindex on<span class="p">;</span>
            allow 127.0.0.1<span class="p">;</span>
            deny all<span class="p">;</span>
        <span class="o">}</span>

        <span class="c"># Only for nginx-naxsi : process denied requests</span>
        <span class="c">#location /RequestDenied {</span>
            <span class="c"># For example, return an error code</span>
            <span class="c">#return 418;</span>
        <span class="c">#}</span>

        <span class="c">#error_page 404 /404.html;</span>

        <span class="c"># redirect server error pages to the static page /50x.html</span>
        <span class="c">#</span>
        <span class="c">#error_page 500 502 503 504 /50x.html;</span>
        <span class="c">#location = /50x.html {</span>
        <span class="c">#   root /usr/share/nginx/www;</span>
        <span class="c">#}</span>

        <span class="c"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
        <span class="c">#</span>
        location ~ <span class="se">\.</span>php<span class="nv">$ </span><span class="o">{</span>
            fastcgi_split_path_info ^<span class="o">(</span>.+<span class="se">\.</span>php<span class="o">)(</span>/.+<span class="o">)</span><span class="nv">$;</span>
        <span class="c">#   # NOTE: You should have &quot;cgi.fix_pathinfo = 0;&quot; in php.ini</span>
        <span class="c">#</span>
        <span class="c">#   # With php5-cgi alone:</span>
        <span class="c">#   fastcgi_pass 127.0.0.1:9000;</span>
        <span class="c">#   # With php5-fpm:</span>
            fastcgi_pass unix:/var/run/php5-fpm.sock<span class="p">;</span>
            fastcgi_index index.php<span class="p">;</span>
            include fastcgi_params<span class="p">;</span>
        <span class="o">}</span>

        <span class="c"># deny access to .htaccess files, if Apache&#39;s document root</span>
        <span class="c"># concurs with nginx&#39;s one</span>
        <span class="c">#</span>
        location ~ /<span class="se">\.</span>ht <span class="o">{</span>
            deny all<span class="p">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c"># another virtual host using mix of IP-, name-, and port-based configuration</span>
    <span class="c">#</span>
    <span class="c">#server {</span>
    <span class="c">#   listen 8000;</span>
    <span class="c">#   listen somename:8080;</span>
    <span class="c">#   server_name somename alias another.alias;</span>
    <span class="c">#   root html;</span>
    <span class="c">#   index index.html index.htm;</span>
    <span class="c">#</span>
    <span class="c">#   location / {</span>
    <span class="c">#       try_files $uri $uri/ /index.html;</span>
    <span class="c">#   }</span>
    <span class="c">#}</span>

    <span class="c"># HTTPS server</span>
    <span class="c">#</span>
    <span class="c">#server {</span>
    <span class="c">#   listen 443;</span>
    <span class="c">#   server_name localhost;</span>
    <span class="c">#</span>
    <span class="c">#   root html;</span>
    <span class="c">#   index index.html index.htm;</span>
    <span class="c">#</span>
    <span class="c">#   ssl on;</span>
    <span class="c">#   ssl_certificate cert.pem;</span>
    <span class="c">#   ssl_certificate_key cert.key;</span>
    <span class="c">#</span>
    <span class="c">#   ssl_session_timeout 5m;</span>
    <span class="c">#</span>
    <span class="c">#   ssl_protocols SSLv3 TLSv1;</span>
    <span class="c">#   ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv3:+EXP;</span>
    <span class="c">#   ssl_prefer_server_ciphers on;</span>
    <span class="c">#</span>
    <span class="c">#   location / {</span>
    <span class="c">#       try_files $uri $uri/ /index.html;</span>
    <span class="c">#   }</span>
    <span class="c">#}</span></code></pre></div>

<p> </p>

<p>7、建立软链接</p>

<p>进入sites-enabled建立到sites-available的链接</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo ln -s /etc/nginx/sites-available/mysql /etc/nginx/sites-enabled/mysql</code></pre></div>

<p>8、我们在安装php5相关的一些组件</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-cache search php5
apt-get install php5-mysql php5-curl php5-gd php5-intl php-pear php5-imagick php5-imap php5-mcrypt php5-memcache php5-ming php5-ps php5-pspell php5-recode php5-snmp php5-sqlite php5-tidy php5-xmlrpc php5-xsl</code></pre></div>

<p>9、重启服务</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo service php5-fpm restart
sudo service nginx restart</code></pre></div>


      <div class="readall"><a href="/posts/28.html" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="pagination">
  
  
  <a class="pagination-item newer" href="/page/2"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;上一页</a>
  
    
  
  <a class="pagination-item older" href="/page/4">下一页&nbsp;&nbsp;<i class="fa fa-arrow-right"></i></a>
  
</div>

    
    <footer>Copyright&nbsp;&copy;&nbsp;2014 <a href="http://xiajie.me">Jerry's Blog</a></footer>

    
    </div>
  </div>    
  <div id="top">
    <a id="rocket" href="javascript:void(0);" title="返回顶部"><i></i></a>
  </div>
  
</body>
</html>
